(function(){var f,h,c=function(b,a){return function(){return b.apply(a,arguments)}};f=jQuery;h=function(){function b(a,g){null==g&&(g={});this.text=c(this.text,this);this.interval=c(this.interval,this);this.format=c(this.format,this);this.unit=c(this.unit,this);this.amount=c(this.amount,this);this.formatting=c(this.formatting,this);this.adjust=c(this.adjust,this);this.prefix=c(this.prefix,this);this.suffix=c(this.suffix,this);this.date=c(this.date,this);this.reformat=c(this.reformat,this);this.$el=
a;this.settings=f.extend({},b.settings,g);this.reformat()}b.settings={singular:1,interval:1E3,suffixes:{past:"ago",future:"until"},prefixes:{past:"",future:""},units:"years months weeks days hours minutes seconds".split(" "),formats:{now:"now",singular:{seconds:"a second",minutes:"a minute",hours:"an hour",days:"a day",weeks:"a week",months:"a month",years:"a year"},plural:{seconds:"{{amount}} seconds",minutes:"{{amount}} minutes",hours:"{{amount}} hours",days:"{{amount}} days",weeks:"{{amount}} weeks",
months:"{{amount}} months",years:"{{amount}} years"},tiny:{seconds:"{{amount}}s",minutes:"{{amount}}m",hours:"{{amount}}h",days:"{{amount}}d",weeks:"{{amount}}w",months:"{{amount}}m",years:"{{amount}}y"}}};b.prototype.reformat=function(){var a;a=this.interval();this.$el.html(this.text(a));return setTimeout(this.reformat,this.settings.interval)};b.prototype.date=function(){return new Date(this.$el.attr("datetime")||this.$el.attr("date")||this.$el.attr("time"))};b.prototype.suffix=function(a){if(0>
a)return this.settings.suffixes.past;if(0<a)return this.settings.suffixes.future};b.prototype.prefix=function(a){if(0>a)return this.settings.prefixes.past;if(0<a)return this.settings.prefixes.future};b.prototype.adjust=function(a,b){return Math.floor(Math.abs(a/b))};b.prototype.formatting=function(a){return{seconds:this.adjust(a,1E3),minutes:this.adjust(a,6E4),hours:this.adjust(a,36E5),days:this.adjust(a,864E5),weeks:this.adjust(a,6048E5),months:this.adjust(a,2592E6),years:this.adjust(a,31536E6)}};
b.prototype.amount=function(a){return a[this.unit(a)]||0};b.prototype.unit=function(a){var b,c,d,e;e=this.settings.units;c=0;for(d=e.length;c<d;c++)if(b=e[c],0<a[b])return b};b.prototype.format=function(a,b){var c,d;return null!=this.settings.style?null!=(c=this.settings.formats[this.settings.style])?c[b]:void 0:null!=(d=this.settings.formats[a===this.settings.singular?"singular":"plural"])?d[b]:void 0};b.prototype.interval=function(){return this.date()-new Date};b.prototype.text=function(a){var b,
c,d,e;null==a&&(a=this.interval());if(0<a&&null!=this.settings.pending)return this.settings.pending;if(0>a&&null!=this.settings.expired)return this.settings.expired;d=this.suffix(a);c=this.prefix(a);b=this.formatting(a);a=this.amount(b);e=this.unit(b);return(b=this.format(a,e))?(""+c+" "+b.replace("{{unit}}",e).replace("{{amount}}",a)+" "+d).trim():this.settings.formats.now};return b}();f.fn.extend({age:function(b){null==b&&(b={});return this.each(function(){return new h(f(this),b)})}})}).call(this);
